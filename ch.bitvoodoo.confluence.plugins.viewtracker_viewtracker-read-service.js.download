WRMCB=function(e){var c=console;if(c&&c.log&&c.error){c.log('Error running batched script.');c.error(e);}}
;
try {
/* module-key = 'ch.bitvoodoo.confluence.plugins.viewtracker:viewtracker-read-service', location = 'ch/bitvoodoo/confluence/plugins/viewtracker/scripts/viewtracker-already-viewed-service.js' */
define("bitvoodoo/viewtracker/read-service",["ajs","jquery","confluence/api/constants","bitvoodoo/viewtracker/namespaces"],function(i,d,e){var b=e.CONTEXT_PATH+"/rest/viewtracker/1.0/visitors/current-user/check?contentId=";var j={};var f=[];var a=[];var c=[];var g=null;function h(n,m){if(!n){return}clearTimeout(g);if(n&&c.indexOf(n)<0){c.push(n)}if(typeof m=="function"){a[n]=m}function k(o){if(o.contentId){var p=[];p.push(o);i.trigger("bitvoodoo/viewtracker/api/current-user/viewed",{results:p});if(a[o.contentId]){a[o.contentId](o);a[o.contentId]=null}}}function l(){var o=f[n];if(o){if(o.readyState===4){m(j[n])}else{o.done(l)}}else{f[n]=i.safe.ajax({type:"GET",dataType:"json",data:{},url:b+c.join("&contentId="),success:function(p){if(p.success&&p.results){p.results.forEach(function(q){if(q&&q.contentId){j[q.contentId]=q;k(q)}})}}});c=[]}}if(j[n]){k(j[n])}else{g=setTimeout(function(){l()},10)}}return{hasCurrentUserViewedContent:h}});require(["ajs","jquery","bitvoodoo/viewtracker/read-service"],function(a,b,c){a.bind("seibertmedia/len/content-rendered",function(d,e){if(e.renderedContent){e.renderedContent.forEach(function(f){c.hasCurrentUserViewedContent(f)})}})});
}catch(e){WRMCB(e)};